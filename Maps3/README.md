# Maps3 - 3 задание

Мобильное приложение на React Native, которое позволяет пользователям добавлять на карту маркеры с изображениями, отслеживать текущее местоположение и получать уведомления при приближении к сохранённым меткам.

## Быстрый старт

1.  **Установите зависимости:**
    ```bash
    npm install
    ```

2.  **Запустите приложение:**
    ```bash
    npm start
    ```

## О проекте

Это мобильное приложение, созданное с помощью React Native и Expo.

*   **Добавление маркеров:** Длительное нажатие на карту создает новый маркер.
*   **Добавление изображений:** Нажмите на маркер, чтобы перейти к экрану деталей и добавить изображение.
*   **Навигация:** Используется Expo Router.
*   **Управление состоянием:** Используется React Context.
*   **Хранение данных:** Используется SQLite для локального хранения информации о маркерах.
*   **Геолокация:** Отслеживание текущего местоположения пользователя с использованием expo-location.
*   **Уведомления:** Автоматические уведомления при приближении к сохранённым меткам.

## Особенности реализации

*   **Отслеживание местоположения:** Приложение запрашивает разрешение на доступ к геолокации и обновляет местоположение пользователя с заданным интервалом.
*   **Управление уведомлениями:** Реализована система уведомлений с предотвращением дубликатов, используя NotificationManager.
*   **Проверка приближения:** Алгоритм вычисляет расстояние между пользователем и сохранёнными метками, и отправляет уведомления при приближении к ним.

## Инструкция по тестированию

1. **Тестирование местоположения:**
   * Используйте симулятор местоположения Expo или включите режим разработчика на устройстве
   * В настройках разработчика задайте тестовые координаты для проверки функционала
   * Проверьте, что маркер местоположения пользователя корректно отображается на карте

2. **Тестирование уведомлений:**
   * Добавьте несколько меток на карте
   * Используйте симулятор местоположения для "перемещения" рядом с одной из меток
   * Убедитесь, что уведомление появляется при приближении к метке
   * Переместитесь подальше от метки и убедитесь, что повторное уведомление не появляется

## Стратегия управления уведомлениями

Система уведомлений основана на классе NotificationManager, который:

*   Хранит активные уведомления в Map для предотвращения дубликатов
*   Проверяет приближение к меткам при каждом обновлении местоположения
*   Отправляет уведомления только при первом приближении к метке
*   Удаляет уведомления, когда пользователь удаляется от метки
*   Обновляет уведомления при изменении списка ближайших маркеров

## Известные ограничения

*   Точность определения местоположения зависит от настроек устройства и качества GPS/сети
*   Уведомления работают только при активном приложении
*   Проверка приближения реализована с порогом в 50 метров